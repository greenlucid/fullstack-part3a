(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(2),o=n(15),a=n.n(o),u=n(6),i=n(3),s=n(4),d=n.n(s),l="/api/persons",b={getAll:function(){return d.a.get(l).then((function(e){return e.data}))},create:function(e){return d.a.post(l,e).then((function(e){return e.data}))},update:function(e,t){return d.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))}},j=function(e){var t=e.person,n=e.setPersons;e.setErrorMessage;return Object(r.jsxs)("li",{children:[t.name," ",t.number," "," ",Object(r.jsx)("button",{onClick:function(e){return function(){window.confirm("Delete ".concat(e.name,"?"))&&b.remove(e.id).then((function(e){b.getAll().then((function(e){return n(e)}))}))}}(t),children:"delete"})]},t.id)},h=function(e){var t=e.persons,n=e.setPersons,c=e.setErrorMessage;return Object(r.jsx)("ul",{children:t.map((function(e){return Object(r.jsx)(j,{person:e,setPersons:n,setErrorMessage:c},e.id)}))})},f=function(e){var t=e.newName,n=e.newNumber,c=e.handleNameChange,o=e.handleNumberChange,a=e.addPerson;return Object(r.jsxs)("form",{onSubmit:a,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:t,onChange:c})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:n,onChange:o})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var t=e.nameFilter,n=e.handleNameFilterChange;return Object(r.jsxs)("div",{children:["Filter the list below ",Object(r.jsx)("input",{value:t,onChange:n})]})},O=function(e){var t=e.errorMessage,n={color:"red",borderStyle:"solid",borderWidth:10,borderColor:"red",background:"black",fontWeight:"bold"},c={color:"green",borderStyle:"solid",borderWidth:10,borderColor:"green",background:"white",fontWeight:"bold"};return t?Object(r.jsx)("div",{style:function(){if(t)return"notice"===t.type?c:n}(),children:Object(r.jsx)("h2",{children:t.text})}):Object(r.jsx)("br",{})},p=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],a=Object(c.useState)(""),s=Object(i.a)(a,2),d=s[0],l=s[1],j=Object(c.useState)(""),p=Object(i.a)(j,2),g=p[0],x=p[1],v=Object(c.useState)(""),w=Object(i.a)(v,2),C=w[0],y=w[1],N=Object(c.useState)(null),k=Object(i.a)(N,2),S=k[0],P=k[1];Object(c.useEffect)((function(){b.getAll().then((function(e){return o(e)}))}),[]);var E=""===C?n:n.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Phonebook"}),Object(r.jsx)(m,{nameFilter:C,handleNameFilterChange:function(e){return y(e.target.value)}}),Object(r.jsx)(O,{errorMessage:S}),Object(r.jsx)("h2",{children:"Add new entry"}),Object(r.jsx)(f,{newName:d,newNumber:g,handleNameChange:function(e){return l(e.target.value)},handleNumberChange:function(e){return x(e.target.value)},addPerson:function(e){if(e.preventDefault(),n.map((function(e){return e.name})).includes(d)){if(window.confirm("".concat(d," is already in the Superbook, replace the number?"))){var t=n.find((function(e){return e.name===d})),r=Object(u.a)(Object(u.a)({},t),{},{number:g});b.update(r.id,r).then((function(e){o(n.map((function(t){return t.id!==r.id?t:e}))),P({type:"notice",text:"".concat(d," was updated")}),setTimeout((function(){P(null)}),5e3)})).catch((function(e){console.log(e),P({type:"error",text:"".concat(r.name," was already deleted")})}))}}else{var c={name:d,number:g};b.create(c).then((function(e){o(n.concat(e)),P({type:"notice",text:"".concat(e.name," was created")}),setTimeout((function(){P(null)}),5e3)})),l(""),x("")}}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(h,{persons:E,setPersons:o,setErrorMessage:P})]})};a.a.render(Object(r.jsx)(p,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.0c9a5d6e.chunk.js.map